# DIAGRAMA DE ARQUITECTURA - ORIENTA AI

## ARQUITECTURA DE ALTO NIVEL

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         USUARIO (Browser)                           โ
โ                    React SPA (Vite + Tailwind)                      โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
             โ                                    โ
             โ Auth Flow                          โ API Calls
             โผ                                    โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   SUPABASE AUTH (OAuth)     โ    โ   NETLIFY FUNCTIONS             โ
โ   - Google Sign-In          โ    โ   - generate-explanation.js     โ
โ   - JWT Tokens              โ    โ   - riasec.js                   โ
โ   - Session Management      โ    โ                                 โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ    โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ                               โ
             โ                               โ Claude API Call
             โ                               โผ
             โ                    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ                    โ   CLAUDE API (Anthropic)       โ
             โ                    โ   - Model: Sonnet 3.5          โ
             โ                    โ   - Anรกlisis personalizado     โ
             โ                    โ   - Chat conversacional        โ
             โ                    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    SUPABASE POSTGRESQL                              โ
โ                                                                     โ
โ   โโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโ โ
โ   โ user_profiles    โ  โ test_results     โ  โ scheduled_      โ โ
โ   โ                  โ  โ                  โ  โ sessions        โ โ
โ   โ - user_id        โ  โ - user_id        โ  โ - user_id       โ โ
โ   โ - nombre         โ  โ - codigo_holland โ  โ - orientador_id โ โ
โ   โ - role           โ  โ - puntajes       โ  โ - scheduled_dateโ โ
โ   โ - edad, genero   โ  โ - explicacion_ia โ  โ - status        โ โ
โ   โโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโ โ
โ                                                                     โ
โ   ๐ Row Level Security (RLS) habilitado en todas las tablas       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## FLUJO DE AUTENTICACIรN

```
โโโโโโโโโโโโ
โ Usuario  โ
โโโโโโฌโโโโโโ
     โ 1. Click "Continuar con Google"
     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ GoogleSignIn.jsx                        โ
โ signInWithGoogle()                      โ
โโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
     โ 2. Redirect a Google OAuth
     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Google OAuth Screen                     โ
โ - Autorizaciรณn de acceso                โ
โ - Scope: email, profile                 โ
โโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
     โ 3. Redirect con token
     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ /auth/callback                          โ
โ AuthCallback.jsx                        โ
โ - getSession()                          โ
โ - Verifica user_profile                 โ
โโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
     โ
     โโโโ Si nuevo usuario โโโ /complete-profile
     โ
     โโโโ Si tiene perfil โโโ /test
```

---

## FLUJO DEL TEST RIASEC

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    FLUJO COMPLETO DEL TEST                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. INICIO
   /test โ TestRIASEC.jsx
   - Verifica autenticaciรณn
   - Carga 36 preguntas

2. RESPUESTAS
   Usuario responde (escala 1-5)
   - Guarda en sessionStorage
   - Progress bar actualiza

3. FINALIZAR
   Click "Finalizar Test"
   - Valida todas respondidas
   - Guarda duraciรณn

4. CรLCULO
   /resultados โ Resultados.jsx

   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ calcularCodigoRIASEC(responses)     โ
   โ                                     โ
   โ 1. Suma puntajes por dimensiรณn      โ
   โ    R, I, A, S, E, C                 โ
   โ                                     โ
   โ 2. Ordena de mayor a menor          โ
   โ                                     โ
   โ 3. Sistema de desempate             โ
   โ    - Intensidad alta (4-5)          โ
   โ    - Rechazo bajo (1-2)             โ
   โ                                     โ
   โ 4. Top 3 = Cรณdigo Holland           โ
   โ    Ej: "ISA"                        โ
   โ                                     โ
   โ 5. Calcula certeza                  โ
   โ    Alta / Media / Exploratoria      โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โผ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ recomendarCarreras(codigo)          โ
   โ                                     โ
   โ - Carga 30 carreras                 โ
   โ - Calcula compatibilidad 0-100      โ
   โ - Ordena por score                  โ
   โ - Retorna top 6                     โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โผ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ generarExplicacionIA()              โ
   โ                                     โ
   โ POST /.netlify/functions/           โ
   โ      generate-explanation           โ
   โ                                     โ
   โ โ Claude API                        โ
   โ โ Anรกlisis 250-300 palabras         โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โผ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ saveTestResult()                    โ
   โ                                     โ
   โ INSERT INTO test_results            โ
   โ - codigo_holland                    โ
   โ - puntajes                          โ
   โ - explicacion_ia                    โ
   โ - carreras_recomendadas             โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โผ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ MOSTRAR RESULTADOS                  โ
   โ                                     โ
   โ - Cรณdigo Holland grande             โ
   โ - Top 3 dimensiones                 โ
   โ - Anรกlisis de IA                    โ
   โ - 6 carreras recomendadas           โ
   โ - Botรณn agendar sesiรณn              โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## INTEGRACIรN CLAUDE AI - DETALLADA

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    FRONTEND (Resultados.jsx)                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โ POST Request
                             โ Body: {
                             โ   codigo_holland: "ISA",
                             โ   puntajes: {...},
                             โ   tipo: "explicacion"
                             โ }
                             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          NETLIFY FUNCTION (generate-explanation.js)             โ
โ                                                                 โ
โ  1. Validar API Key                                             โ
โ  2. Construir prompt segรบn tipo:                                โ
โ                                                                 โ
โ     Si tipo = "explicacion":                                    โ
โ     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ     โ "Eres un orientador vocacional experto.               โ  โ
โ     โ  Analiza este perfil RIASEC:                          โ  โ
โ     โ                                                        โ  โ
โ     โ  Cรณdigo: ISA                                          โ  โ
โ     โ  Top 3: Investigador, Social, Artรญstico               โ  โ
โ     โ  Puntajes: I=28, S=25, A=23, R=15, E=14, C=12         โ  โ
โ     โ                                                        โ  โ
โ     โ  Genera un anรกlisis personalizado de 250-300 palabras โ  โ
โ     โ  con tono cรกlido y motivador..."                      โ  โ
โ     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                 โ
โ     Si tipo = "conversacion":                                   โ
โ     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ     โ "Eres un orientador experto hablando con un joven.    โ  โ
โ     โ  Su perfil es ISA.                                    โ  โ
โ     โ  Responde: [pregunta del usuario]"                    โ  โ
โ     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                 โ
โ  3. Llamar Claude API                                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โ HTTPS Request
                             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              CLAUDE API (api.anthropic.com)                     โ
โ                                                                 โ
โ  Endpoint: POST /v1/messages                                    โ
โ  Headers:                                                       โ
โ    - x-api-key: [CLAUDE_API_KEY]                               โ
โ    - anthropic-version: 2023-06-01                             โ
โ                                                                 โ
โ  Body:                                                          โ
โ  {                                                              โ
โ    "model": "claude-3-5-sonnet-20241022",                      โ
โ    "max_tokens": 1024,                                         โ
โ    "messages": [                                               โ
โ      {                                                          โ
โ        "role": "user",                                         โ
โ        "content": [prompt construido]                          โ
โ      }                                                          โ
โ    ]                                                            โ
โ  }                                                              โ
โ                                                                 โ
โ  ๐ค Procesamiento con LLM (1-3 segundos)                        โ
โ                                                                 โ
โ  Response:                                                      โ
โ  {                                                              โ
โ    "content": [                                                โ
โ      {                                                          โ
โ        "type": "text",                                         โ
โ        "text": "Tu perfil ISA combina..."                     โ
โ      }                                                          โ
โ    ]                                                            โ
โ  }                                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โ Response
                             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          NETLIFY FUNCTION (generate-explanation.js)             โ
โ                                                                 โ
โ  4. Extraer texto de respuesta                                  โ
โ  5. Retornar JSON:                                              โ
โ     {                                                           โ
โ       "ok": true,                                              โ
โ       "explicacion": "Tu perfil ISA...",                       โ
โ       "metadata": {                                            โ
โ         "codigo_holland": "ISA",                               โ
โ         "timestamp": "2025-01-04T..."                          โ
โ       }                                                         โ
โ     }                                                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โ JSON Response
                             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    FRONTEND (Resultados.jsx)                    โ
โ                                                                 โ
โ  6. Recibe explicaciรณn                                          โ
โ  7. Renderiza en UI                                             โ
โ  8. Guarda en Supabase (test_results.explicacion_ia)           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## MOTOR DE RECOMENDACIรN DE CARRERAS

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                 recomendarCarreras(codigoUsuario)               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

INPUT: Cรณdigo usuario = "ISA"

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 1. CARGAR CARRERAS (30 total)   โ
โ    carreras.json                 โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโ
               โ
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 2. CALCULAR COMPATIBILIDAD PARA CADA CARRERA                    โ
โ                                                                  โ
โ    Ejemplo: Usuario "ISA" vs Carrera "IRC"                      โ
โ                                                                  โ
โ    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ    โ calcularCompatibilidad("ISA", "IRC")                    โ  โ
โ    โ                                                         โ  โ
โ    โ Score = 0                                               โ  โ
โ    โ                                                         โ  โ
โ    โ Posiciรณn 1: I == I ? +40 โ Score = 40                  โ  โ
โ    โ Posiciรณn 2: S == R ? NO  โ Score = 40                  โ  โ
โ    โ Posiciรณn 3: A == C ? NO  โ Score = 40                  โ  โ
โ    โ                                                         โ  โ
โ    โ Bonus: I en "IRC" ? +10 โ Score = 50                   โ  โ
โ    โ Bonus: S en "IRC" ? NO  โ Score = 50                   โ  โ
โ    โ Bonus: A en "IRC" ? NO  โ Score = 50                   โ  โ
โ    โ                                                         โ  โ
โ    โ RESULTADO: 50/100                                       โ  โ
โ    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                  โ
โ    Repetir para las 30 carreras                                 โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 3. ORDENAR POR SCORE (Descendente)                              โ
โ                                                                  โ
โ    1. Psicologรญa (SIA) โ 100                                    โ
โ    2. Medicina (ISR) โ 85                                       โ
โ    3. Ing. Civil Informรกtica (IRC) โ 75                         โ
โ    4. Biologรญa (IRA) โ 70                                       โ
โ    5. Trabajo Social (SIE) โ 65                                 โ
โ    6. Educaciรณn Bรกsica (SAE) โ 60                               โ
โ    ...                                                           โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 4. RETORNAR TOP 6                                               โ
โ                                                                  โ
โ    [                                                             โ
โ      {                                                           โ
โ        nombre: "Psicologรญa",                                    โ
โ        codigo_holland: "SIA",                                   โ
โ        compatibilidad_score: 100,                               โ
โ        area: "Ciencias Sociales",                               โ
โ        salario_promedio_chile_clp: 1200000,                     โ
โ        empleabilidad: "Media",                                  โ
โ        descripcion: "...",                                      โ
โ        universidades_destacadas: ["UC", "UChile", ...],         โ
โ        campos_laborales: ["Clรญnica", "Organizacional", ...]     โ
โ      },                                                          โ
โ      ...5 mรกs                                                    โ
โ    ]                                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## SISTEMA DE ROLES Y PERMISOS

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      JERARQUรA DE ROLES                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                        โโโโโโโโโโโโ
                        โ  ADMIN   โ  โ Control total
                        โโโโโโฌโโโโโโ
                             โ
                โโโโโโโโโโโโโโดโโโโโโโโโโโโโ
                โ                         โ
          โโโโโโโผโโโโโโโ          โโโโโโโโผโโโโโโ
          โ ORIENTADOR โ          โ    USER    โ
          โโโโโโโโโโโโโโ          โโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ PERMISOS POR ROL                                                โ
โ                                                                 โ
โ USER (usuario normal)                                           โ
โ  โ Ver su propio perfil                                        โ
โ  โ Hacer test RIASEC                                           โ
โ  โ Ver sus resultados                                          โ
โ  โ Agendar sesiones                                            โ
โ  โ Ver otros usuarios                                          โ
โ  โ Cambiar roles                                               โ
โ                                                                 โ
โ ORIENTADOR                                                      โ
โ  โ Todo lo de USER                                             โ
โ  โ Ver todos los usuarios (/orientador)                        โ
โ  โ Ver historial de tests completo                             โ
โ  โ Gestionar sesiones agendadas                                โ
โ  โ Agregar notas a sesiones                                    โ
โ  โ Cambiar roles                                               โ
โ                                                                 โ
โ ADMIN                                                           โ
โ  โ Todo lo de ORIENTADOR                                       โ
โ  โ Cambiar roles de usuarios (/admin)                          โ
โ  โ Ver estadรญsticas del sistema                                โ
โ  โ Control total de datos                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Implementaciรณn:
- Roles almacenados en user_profiles.role
- RLS valida permisos en cada query
- hasRole(requiredRole) helper en frontend
```

---

## DEPLOYMENT PIPELINE

```
โโโโโโโโโโโโโโโโ
โ Developer    โ
โ (Local)      โ
โโโโโโโโฌโโโโโโโโ
       โ git push
       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ GitHub Repository                       โ
โ github.com/devjaime/orienta-ai          โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ Webhook
       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Netlify Build                           โ
โ                                         โ
โ 1. git clone                            โ
โ 2. npm install                          โ
โ 3. npm run build (Vite)                 โ
โ 4. Deploy functions/                    โ
โ 5. Deploy dist/ to CDN                  โ
โ                                         โ
โ โฑ๏ธ  Build time: ~30-60s                  โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Netlify CDN                             โ
โ https://[tu-app].netlify.app            โ
โ                                         โ
โ - Static files on edge                  โ
โ - Functions en AWS Lambda               โ
โ - HTTPS automรกtico                      โ
โ - Rollback con 1 click                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Servicios Externos:
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ
โ Supabase        โ    โ Claude API       โ
โ (PostgreSQL +   โ    โ (Anthropic)      โ
โ  Auth)          โ    โ                  โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ
```

---

## STACK DETALLADO POR CAPA

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         PRESENTATION LAYER                      โ
โ                                                                 โ
โ  React 19.1.0                                                   โ
โ  โโ React Router DOM 6.22.0   (Routing)                        โ
โ  โโ Tailwind CSS 3.4.17       (Styling)                        โ
โ  โโ Framer Motion 12.23.12    (Animations)                     โ
โ  โโ Lucide React 0.536.0      (Icons)                          โ
โ  โโ Vite 7.0.4                (Build tool)                     โ
โ                                                                 โ
โ  Build Output: Static SPA โ Netlify CDN                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        APPLICATION LAYER                        โ
โ                                                                 โ
โ  Netlify Functions (Node.js serverless)                         โ
โ  โโ generate-explanation.js  (Claude API integration)          โ
โ  โโ riasec.js                (Optional Airtable logging)       โ
โ                                                                 โ
โ  Runtime: AWS Lambda                                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                           DATA LAYER                            โ
โ                                                                 โ
โ  Supabase (Managed PostgreSQL)                                  โ
โ  โโ user_profiles          (Usuarios y roles)                  โ
โ  โโ test_results           (Resultados RIASEC + IA)            โ
โ  โโ scheduled_sessions     (Sesiones agendadas)                โ
โ                                                                 โ
โ  Features:                                                      โ
โ  - Row Level Security (RLS)                                     โ
โ  - Real-time subscriptions (opcional)                           โ
โ  - Auto backups                                                 โ
โ  - Connection pooling                                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      AUTHENTICATION LAYER                       โ
โ                                                                 โ
โ  Supabase Auth                                                  โ
โ  โโ OAuth 2.0 (Google)                                         โ
โ  โโ JWT token management                                       โ
โ  โโ Session persistence                                        โ
โ  โโ Refresh token rotation                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      AI / EXTERNAL SERVICES                     โ
โ                                                                 โ
โ  Claude API (Anthropic)                                         โ
โ  โโ Model: claude-3-5-sonnet-20241022                          โ
โ  โโ Max tokens: 1024                                           โ
โ  โโ Version: 2023-06-01                                        โ
โ                                                                 โ
โ  Airtable API (Opcional)                                        โ
โ  โโ Logging de tests                                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

**Este diagrama puede proyectarse en pantalla durante la secciรณn de arquitectura del video.**
